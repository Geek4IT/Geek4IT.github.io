---
date: 2014-01-28 20:30:17+00:00
layout: post
title: 使用 WPAD 配合 GAE 实现客户端准零配置科学上网
categories: 文档
tags: 分享 折腾
---

WPAD 是 Web Proxy Auto Discovery 的缩写，可以看做是是 PAC 的扩展应用。

简单说来，以前在浏览器中指定 PAC 文件或者地址，WPAD 就是在 DHCP 的时候自动发现 PAC（实际上也可以在 DNS 中发现 PAC，不过推荐 DHCP 中发现）。

直接说步骤：

1. 首先假定您已经在局域网内配置好 GAE Proxy，且启用了 PAC 文件，这里假设 PAC 是 http://192.168.1.1:8086/proxy.pac

2. 在 DNSMasQ 中配置 WPAD，加入一行：dhcp-option=252,http://192.168.1.1:8086/proxy.pac

    服务端 WPAD 配置完毕，简单吧。

3. 客户端，请确保客户端是 DHCP 获取 IP 地址的。

    Mac OS X：设置 -> 网络 -> 选定网络（比如以太网或者 Wi-Fi）-> 高级 -> 代理 -> 自动发现代理 -> 勾上

    Windows：Internet Explorer 属性 -> 连接 -> 自动检测设置（此设置可能已经默认开启，也就是说 Windows 系统零配置）

    万事搞定，之后畅享零配置科学上网吧。
 
这样好的好处是不言而喻的，服务端配置好后，客户端（Windows、Mac OS X 均可，其它客户端应该也行）只要勾选一个选项，无需做其它额外配置，DHCP 的时候将自动发现，可以实现科学上网。且切换
到别的网络后，自动就使用别的网络的代理设置了（或者该网络没有配置代理，则自动直连了）。

这是我现在为止尝试到的最简单（准零配置）、最方便（支持HTTPS）、最廉价（GAE 免费使用）的方案，什么 VPN、S**Sock、套神马的，不是要钱就是不稳定，也不能长期使用。
